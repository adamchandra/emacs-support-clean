package controllers

import java.text.DecimalFormat
import play.api._
import play.api.mvc._

import http.{Writeable, ContentTypeOf, ContentTypes}
import mvc.Codec
import play.api.Play.current
import org.fusesource.scalate.layout.DefaultLayoutStrategy

 
trait ScalateController {
  import Scalate._
  import org.apache.commons.lang3.{StringUtils => l3su}

  def render(s:String)(attrs: Tuple2[Symbol, Any]*)(implicit r:RequestHeader): ScalateContent = {
    Scalate(s+".jade").render(
      ('title -> l3su.capitalize(s) ::
       'currentUser -> 	(<li class="dropdown">
				                 <a href="/login"> Login </a> 
				                 </li>) ::
       'view -> s ::
       attrs.toList):_*
    )
  }

  def render(args: (Symbol, Any)*) = {
    def defaultTemplate = Http.Request.current().action.replace(".", "/")
    ScalateTemplate(defaultTemplate).render(args: _*);
  }

//   def render(s:String)(attrs: Tuple2[Symbol, Any]*)(implicit r:RequestHeader): ScalateContent = {
//     Scalate(s+".jade").render(
//       ('currentUser -> RexaLogin.showCurrentUser ::
//        'title -> l3su.capitalize(s) ::
//        'view -> s ::
//        attrs.toList):_*
//     )
//   }

}
