package net.openreview
package model
package users

import com.mongodb.casbah.Imports._
import org.specs2.mutable._
import java.util.UUID
import org.joda.time.Period

import com.novus.salat._
import com.novus.salat.dao._
import net.openreview.model.mongodb.salatContext._

import com.novus.salat.util.MapPrettyPrinter
import org.joda.time.DateTime

import scalaz.{Validation, Success, Failure}, Validation._, scalaz.syntax.validation._
import scalaz.syntax.std.option._

class MongoMigrationSpec extends MongoSpec {

  sequential
  import Storage._


  "User merging" should {

    "update all mongo recs associated w/merged user" in {
      // create credentialed/un- user
      // create events for both
      // merge users
      // verify that uncredentialed user's records are updated

      todo
    }

  }

}



// {
//         "_id" : BinData(3,"yk6+HbhMTaTOB4UCFD+vig=="),
//         "type" : "request",
//         "created" : ISODate("2013-01-24T19:19:09.606Z"),
//         "creator" : BinData(3,"AAAAAAAAAAAEAAAAAAAAAA=="),            -> creator-hist[(old-creator, datestamp)]
//         "target" : BinData(3,"iEoNiPOeRHzN43mu4k89nA=="),
//         "acknowledgeBy" : null,
//         "due" : null,
//         "subject" : "",
//         "template" : {
//                 "type" : "licenseTemplate",
//                 "creator" : BinData(3,"iEoNiPOeRHzN43mu4k89nA=="),
//                 "target" : BinData(3,"ECcAAAAAAAAQJwAAAAAAAA=="),
//                 "docTemplate" : {
//                         "type" : "endorsementTemplate",
//                         "inResponseTo" : BinData(3,"LkPewqDm7MoP/j1P/0Z5qg=="),
//                         "authors" : BinData(3,"iEoNiPOeRHzN43mu4k89nA=="),         -> authors-hist[(old-creator, datestamp)]
//                         "doc" : BinData(3,"LkPewqDm7MoP/j1P/0Z5qg==")
//                 }
//         },
//         "sticky" : false
// }
