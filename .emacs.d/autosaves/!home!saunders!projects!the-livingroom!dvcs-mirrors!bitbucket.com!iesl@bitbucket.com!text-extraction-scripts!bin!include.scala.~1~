object Args  {
  import scala.io.Source
  import java.io.{File=>JFile, FileWriter, BufferedWriter}

  def argsToMap(args: Array[String]): Map[String, List[String]] = {
    import scala.collection.mutable.{ListMap => LMap}
    val argmap = LMap[String, List[String]]()
    args.foldLeft(argmap)({(m, k:String) => {
      val ss:Seq[Char] = k
      ss match {
        case Seq('-', '-', opt @ _*) => m.put(opt.toString, List[String]())
        case Seq('-', opt @ _*) => m.put(opt.toString, List[String]())
        case opt @ _ => m.put(m.head._1, m.head._2 ++ List[String](opt.toString))
      }
      m
    }})
    Map[String, List[String]](argmap.toList.reverse: _*)
  }

  override def main(args: Array[String]) = {
    val argmap = argsToMap(args)
    println("args: " + argmap.toList.mkString(", "))
    // val batchSize = argmap("batch-size").headOption.getOrElse("5").toInt

  }
}
